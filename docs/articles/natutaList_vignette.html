<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to naturaList R Package • naturaList</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to naturaList R Package">
<meta property="og:description" content="naturaList">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">naturaList</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/natutaList_vignette.html">Introduction to naturaList R Package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="natutaList_vignette_files/header-attrs-2.6/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to naturaList R Package</h1>
            
      
      
      <div class="hidden name"><code>natutaList_vignette.Rmd</code></div>

    </div>

    
    
<p>The aim of <code>naturaList</code> package is to implement a classification of occurrence records based on the confiability in the species identification. The classification could be done up to six levels of confidence. Additionally, <code>naturaList</code> provides tools to filter the occurrence data based on these classification levels.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the package from github:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span>
<span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"avrodrigues/naturaList"</span><span class="op">)</span></code></pre></div>
</div>
<div id="classify-occurrence-records-based-on-confidence-in-the-species-identification" class="section level2">
<h2 class="hasAnchor">
<a href="#classify-occurrence-records-based-on-confidence-in-the-species-identification" class="anchor"></a>Classify occurrence records based on confidence in the species identification</h2>
<p>The rationale of the classification is that the most reliable identification of a specimen is made by a specialist in the taxa. To classify an occurence at this level of confidence, the <code><a href="../reference/classify_occ.html">classify_occ()</a></code> function needs of an occurrence and a specialist dataset. The other levels are derived from information contained in the occurence dataset. Thus, the default order of confidence levels is:</p>
<ul>
<li>Level 1 - species is identified by a specialist, if not;</li>
<li>Level 2 - species is identified by a taxonomist, if not;</li>
<li>Level 3 - occurrence record has an image associated, if not;</li>
<li>Level 4 - the specimen is preserved in a scientific colection, if not;</li>
<li>Level 5 - the identification was done in filed observation, if not;</li>
<li>Level 6 - no criteria was met.</li>
</ul>
<p>The user can alter this order, depending on his/her objetives, except for the Level 1 that is always a species determined by a specialist.</p>
<p>As exemple, we will use the datasets in <code>naturaList</code>: <code>A.setosa</code>, as the occurrence dataset, and <code>speciaLists</code>, as the specialist dataset. In the <code>A.setosa</code> there are occurrence records for <em>Alsophila setosa</em>, a tree fern of the Brazilian Atlantic Forest. This dataset were downloaded from <a href="https://doi.org/10.15468/dl.6jesg0">Global Biodiversity Information Facilility (GBIF)</a>. The <code>speciaLists</code> is a dataset with specialists of ferns and licophytes of Brazil, which we gathered from the authors of this <a href="http://dx.doi.org/10.1590/2175-7860201566410">paper</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load package and data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">naturaList</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"A.setosa"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"speciaLists"</span><span class="op">)</span>

<span class="co"># see the size of datasets</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">A.setosa</span><span class="op">)</span> <span class="co"># see ?A.setosa for details</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">speciaLists</span><span class="op">)</span> <span class="co"># see ?speciaLists for details</span></code></pre></div>
<p>Classification using the default order of confidence levels</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># classification</span>
<span class="va">occ.class</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classify_occ.html">classify_occ</a></span><span class="op">(</span><span class="va">A.setosa</span>, <span class="va">speciaLists</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">occ.class</span><span class="op">)</span></code></pre></div>
<p>You can check how many occurrences was classified in each level:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">occ.class</span><span class="op">$</span><span class="va">naturaList_levels</span><span class="op">)</span></code></pre></div>
</div>
<div id="create-a-specialist-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-specialist-dataset" class="anchor"></a>Create a specialist dataset</h2>
<p>You can easily create a specialist dataset using <code><a href="../reference/create_spec_df.html">create_spec_df()</a></code>. You just need to provide a character vector with the names of specialists, and the output is a dataset formated be used in <code><a href="../reference/classify_occ.html">classify_occ()</a></code>.</p>
<p>In this example, we use the names of four famous brazilians musicians. Note that the Latin accent mark is provided, and even a nickname (e.g. Tom Jobim).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a specialist table example</span>
<span class="va">br.musicians</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Caetano Veloso"</span>, <span class="st">"Antônio Carlos Tom Jobim"</span>, 
                  <span class="st">"Gilberto Gil"</span>, <span class="st">"Vinícius de Morais"</span><span class="op">)</span>

<span class="va">spec_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_spec_df.html">create_spec_df</a></span><span class="op">(</span><span class="va">br.musicians</span><span class="op">)</span>
<span class="va">spec_df</span></code></pre></div>
</div>
<div id="verify-if-the-strings-in-the-determined-by-column-of-occurrence-dataset-is-a-name" class="section level2">
<h2 class="hasAnchor">
<a href="#verify-if-the-strings-in-the-determined-by-column-of-occurrence-dataset-is-a-name" class="anchor"></a>Verify if the strings in the ‘determined.by’ column of occurrence dataset is a name</h2>
<p>It might occur that some strings in the ‘determined.by’ column of the occurrence dataset do not correspond to a taxonomist name. Strings as such <code>"Unknown"</code> often is included in the ‘determined.by’ data field. It is important then that such strings be ignored by the <code><a href="../reference/classify_occ.html">classify_occ()</a></code>, if not this function could flag an occurrence record as determined by a taxonomist when it was not.</p>
<p>To cope with this issue, <code><a href="../reference/get_det_names.html">get_det_names()</a></code> can be used to verify which strings are not taxonomists names. This function returns all unique strings in the ‘determined.by’ column of the dataset. Based on this list of names, you could create a character vector with the strings to be ignored by <code><a href="../reference/classify_occ.html">classify_occ()</a></code>, providing it to the <code>ignore.det.names</code> argument. See also the <code><a href="../reference/classify_occ.html">?classify_occ</a></code> for more details.</p>
</div>
<div id="filter-occurrence-records-within-grid-cells" class="section level2">
<h2 class="hasAnchor">
<a href="#filter-occurrence-records-within-grid-cells" class="anchor"></a>Filter occurrence records within grid cells</h2>
<p>With <code><a href="../reference/grid_filter.html">grid_filter()</a></code> you may filter occurrence records inside grid cells in order to keep only the record with the highest confidence level in each grid cell.</p>
<div class="figure">
<img src="../vignettes/grid_filter.png" alt=""><p class="caption">Fig. 1 - The procedure of <code><a href="../reference/grid_filter.html">grid_filter()</a></code> to select the record with the highest confidence level in each grid cell</p>
</div>
<p>As example, we will filter the <code>occ.class</code> in square grid cells of 0.5 decimal degree of side, which is the default grid cell size of <code><a href="../reference/grid_filter.html">grid_filter()</a></code>. You can provide the height and width of the grid cell in <code>grid.resolution</code> argument, or provide a raster layer in argument <code>r</code> from which the cell is used to filter occurrences.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># grid filtering</span>
<span class="va">occ.grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/grid_filter.html">grid_filter</a></span><span class="op">(</span><span class="va">occ.class</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">occ.grid</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">occ.grid</span><span class="op">$</span><span class="va">naturaList_levels</span><span class="op">)</span></code></pre></div>
</div>
<div id="check-out-for-records-in-a-interactive-map-module" class="section level2">
<h2 class="hasAnchor">
<a href="#check-out-for-records-in-a-interactive-map-module" class="anchor"></a>Check out for records in a interactive map module</h2>
<p>The <code><a href="../reference/map_module.html">map_module()</a></code> function allow the user to visualize the occurrence records in a interactive map. In this interactive map, the user can click over an occurence point to see basic information about the record, such as the instituition that holds the record, who identified the species and when it was identified. Also, if some error is identified, the user could allow that clicking works to delete points.</p>
<pre><code># map module
occ.selected &lt;- map_module(occ.grid)
</code></pre>
<div class="figure">
<img src="../vignettes/fig_map_module.png" alt=""><p class="caption">Fig. 2 - Features of <code><a href="../reference/map_module.html">map_module()</a></code> function used in the example with Alsophila setosa occurrence data. A) the initial display of occurrence records data; B) highlights the features of map_module. I – Select levels to be maintained in the output dataset; II – enable to delete point with click over occurrences; III – show how many points have been selected from the initial dataset; IV – display in the map only occurrences that belong to the selected levels, and turn visualization of the map between OpenStreetMap and Satelite; V – options to draw and edit polygons to select occurrence records that fall within polygon; X – highlights the deleted occurrence points</p>
</div>
<p>In the figure 2, you see two screen shots from <code><a href="../reference/map_module.html">map_module()</a></code>. In figure 2A, it is showed the initial display of occurence records. In figure 2B it is highlighted the features inside <code><a href="../reference/map_module.html">map_module()</a></code>.</p>
<p>In this example, we selected the levels 1 and 2 (Fig 2B - I). Then we deleted three records, by setting on the button <em>delete points with click</em> (Fig 2B - II) and clicking on them. At the end of selection we click on ‘Done !’ button.</p>
<p>Other features are avalible and can be seen on the figure 2. Try out with this example dataset.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Arthur  Vinicius Rodrigues, Gabriel Nakamura, Leandro Duarte.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
